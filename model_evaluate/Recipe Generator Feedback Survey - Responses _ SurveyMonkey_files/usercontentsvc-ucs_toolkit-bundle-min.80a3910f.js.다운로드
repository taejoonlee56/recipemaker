(function(i){var s="secondary_cta_clicked";var u="cta_clicked";var d="module_dismissed";var f=["dismissed_button","guidance_finish_button","left_bottombar_cta","right_bottombar_cta","popup_close"];var o=new Date;var c;try{c=i.$;var t,e,a,r,l,p,m,y,v,g,_,h,w,n,S;function b(e){if(e.substring(0,13)==="ucsProperties"){return e.replace("ucsProperties","").toLowerCase()}}function E(e,t){if(typeof t!=="undefined"){t=true}navigator.sendBeacon("/usercontent/modules/events",JSON.stringify(e))}function k(e,t,a){var r={};Object.assign(r,a);var n=false;p={};if(t.jquery){t=t[0]}Array.prototype.forEach.call(t.dataset,function(e,t){l=b(e);if(l){r[l]=t}});m=t.dataset["ucsModuleName"];v=t.dataset["ucsExperimentName"];g=t.dataset["ucsTreatmentName"];_=t.dataset["ucsIsForcedOverride"];h=t.dataset["ucsPreviewKey"];y=t.dataset["ucsVariationName"];p.render_id=t.dataset["ucsRenderId"];r.time_to_click=(new Date-o)/1e3;if(!m)return;p.name=m;if(v){p.experiment=v}if(g){p.treatment=g}if(_){p.is_forced_override=_}if(h){p.preview_key=h}if(y){p.variation_name=y}w={calls:[{type:"track",event:e,properties:r,context:{page:{url:window.location.href},module:p},timestamp:(new Date).toISOString()}]};if(p.name==="ippm"){n=true}E(w,n)}async function x(e,r,t){var a="/user/update-feature-set";var n={featureSet:e};if(typeof i.$!=="undefined"){c.ajax(a,{type:"POST",contentType:"application/x-www-form-urlencoded",data:n,success:function(e,t,a){if(r){r(t,a.getResponseHeader("prev-feature-set"))}},error:function(e){if(t){t(e)}},timeout:5e3,notificationSkip:true});return}fetch("/user/update-feature-set",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`featureSet=${e}`}).then(e=>{if(!e.ok){throw new Error(`Error updating feature set: ${e.statusText}`)}}).then(e=>{if(r){r(e)}}).catch(e=>{if(t){t(e)}})}document.querySelector("body").addEventListener("click",function(e){try{S=document.getElementsByClassName(".ucs-module-guidance");if(S.length===0||S.css("display")==="none"||document.getElementById("ucs-guidance-overlay").length>0||S.has(e.target).length>0){return}t=d;n={target:"outside_popout",guidance_title:document.getElementById("ucs-guidance-title").text()};k(t,S,n)}catch(e){console.error(e)}});document.querySelector("body").addEventListener("click",function(e){var t=s,a=e.target,r={},n=a.closest("[data-ucs-render-id]"),i=a.closest("a,button");if(!n||!i){return}const o=i.dataset["ucsPropertiesTarget"];if(o==="cta_button"){t=u}if(i.classList.contains("ucs-dismiss-button-container")||f.indexOf(o)>=0){t=d}var c={...n.dataset,...i.dataset};Array.prototype.forEach.call(c,function(e,t){l=b(e);if(l){r[l]=t}});k(t,n,r)});i.UCS=i.UCS||{};i.UCS.logModuleEvent=k;i.UCS.updateFeatureSet=x}catch(e){console.error(e)}})(window);